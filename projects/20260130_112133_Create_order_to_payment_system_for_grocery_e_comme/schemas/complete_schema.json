{
  "flow": {
    "system_name": "Grocery E-Commerce Order-to-Payment System",
    "description": "A comprehensive system to manage the order-to-payment process for a grocery e-commerce platform, including inventory tracking.",
    "version": "1.0",
    "sheets": [
      {
        "name": "Customers",
        "columns": [
          {
            "name": "customer_id",
            "type": "text",
            "description": "Unique identifier for each customer.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "customer_name",
            "type": "text",
            "description": "Full name of the customer.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "email",
            "type": "email",
            "description": "Email address of the customer.",
            "required": true,
            "validation": "must be a valid email format",
            "default_value": null
          },
          {
            "name": "phone_number",
            "type": "text",
            "description": "Contact number of the customer.",
            "required": true,
            "validation": "must be a valid phone number format",
            "default_value": null
          },
          {
            "name": "created_date",
            "type": "date",
            "description": "Date when the customer was added.",
            "required": true,
            "validation": null,
            "default_value": "today()"
          },
          {
            "name": "modified_date",
            "type": "date",
            "description": "Date when the customer information was last modified.",
            "required": false,
            "validation": null,
            "default_value": null
          },
          {
            "name": "status",
            "type": "dropdown",
            "description": "Current status of the customer account.",
            "required": true,
            "validation": "Active, Inactive",
            "default_value": "Active"
          }
        ],
        "description": "Stores customer information for order processing.",
        "primary_key": "customer_id",
        "relationships": [
          "Orders"
        ]
      },
      {
        "name": "Products",
        "columns": [
          {
            "name": "product_id",
            "type": "text",
            "description": "Unique identifier for each product.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "product_name",
            "type": "text",
            "description": "Name of the product.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "category",
            "type": "text",
            "description": "Category to which the product belongs.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "price",
            "type": "currency",
            "description": "Price of the product.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "stock_quantity",
            "type": "number",
            "description": "Available stock quantity of the product.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "created_date",
            "type": "date",
            "description": "Date when the product was added.",
            "required": true,
            "validation": null,
            "default_value": "today()"
          },
          {
            "name": "modified_date",
            "type": "date",
            "description": "Date when the product information was last modified.",
            "required": false,
            "validation": null,
            "default_value": null
          },
          {
            "name": "status",
            "type": "dropdown",
            "description": "Current status of the product.",
            "required": true,
            "validation": "Available, Discontinued",
            "default_value": "Available"
          }
        ],
        "description": "Catalog of products available for purchase.",
        "primary_key": "product_id",
        "relationships": [
          "OrderItems"
        ]
      },
      {
        "name": "Orders",
        "columns": [
          {
            "name": "order_id",
            "type": "text",
            "description": "Unique identifier for each order.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "customer_id",
            "type": "text",
            "description": "Identifier of the customer who placed the order.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "order_date",
            "type": "date",
            "description": "Date when the order was placed.",
            "required": true,
            "validation": null,
            "default_value": "today()"
          },
          {
            "name": "total_amount",
            "type": "currency",
            "description": "Total amount for the order.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "order_status",
            "type": "dropdown",
            "description": "Current status of the order.",
            "required": true,
            "validation": "Pending, Confirmed, Shipped, Delivered, Cancelled",
            "default_value": "Pending"
          },
          {
            "name": "created_date",
            "type": "date",
            "description": "Date when the order record was created.",
            "required": true,
            "validation": null,
            "default_value": "today()"
          },
          {
            "name": "modified_date",
            "type": "date",
            "description": "Date when the order record was last modified.",
            "required": false,
            "validation": null,
            "default_value": null
          }
        ],
        "description": "Tracks customer orders from creation to completion.",
        "primary_key": "order_id",
        "relationships": [
          "Customers",
          "OrderItems",
          "Payments"
        ]
      },
      {
        "name": "OrderItems",
        "columns": [
          {
            "name": "order_item_id",
            "type": "text",
            "description": "Unique identifier for each order item.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "order_id",
            "type": "text",
            "description": "Identifier of the order to which this item belongs.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "product_id",
            "type": "text",
            "description": "Identifier of the product included in the order.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "quantity",
            "type": "number",
            "description": "Quantity of the product ordered.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "price",
            "type": "currency",
            "description": "Price of the product at the time of order.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "created_date",
            "type": "date",
            "description": "Date when the order item was added.",
            "required": true,
            "validation": null,
            "default_value": "today()"
          },
          {
            "name": "modified_date",
            "type": "date",
            "description": "Date when the order item was last modified.",
            "required": false,
            "validation": null,
            "default_value": null
          }
        ],
        "description": "Details of products included in each order.",
        "primary_key": "order_item_id",
        "relationships": [
          "Orders",
          "Products"
        ]
      },
      {
        "name": "Payments",
        "columns": [
          {
            "name": "payment_id",
            "type": "text",
            "description": "Unique identifier for each payment transaction.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "order_id",
            "type": "text",
            "description": "Identifier of the order for which the payment was made.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "payment_date",
            "type": "date",
            "description": "Date when the payment was processed.",
            "required": true,
            "validation": null,
            "default_value": "today()"
          },
          {
            "name": "amount",
            "type": "currency",
            "description": "Amount paid in the transaction.",
            "required": true,
            "validation": null,
            "default_value": null
          },
          {
            "name": "payment_status",
            "type": "dropdown",
            "description": "Status of the payment transaction.",
            "required": true,
            "validation": "Pending, Completed, Failed",
            "default_value": "Pending"
          },
          {
            "name": "created_date",
            "type": "date",
            "description": "Date when the payment record was created.",
            "required": true,
            "validation": null,
            "default_value": "today()"
          },
          {
            "name": "modified_date",
            "type": "date",
            "description": "Date when the payment record was last modified.",
            "required": false,
            "validation": null,
            "default_value": null
          }
        ],
        "description": "Records payment transactions for orders.",
        "primary_key": "payment_id",
        "relationships": [
          "Orders"
        ]
      }
    ],
    "workflow_stages": [
      "Order Creation",
      "Inventory Check",
      "Payment Processing",
      "Order Fulfillment",
      "Order Completion"
    ],
    "integrations": [
      "Payment Gateway API",
      "Inventory Management System"
    ]
  },
  "formulas": {
    "formulas": [
      {
        "sheet": "Orders",
        "target_column": "total_amount",
        "start_row": 2,
        "formula": "=IFERROR(SUMIF(OrderItems!A:A, A2, OrderItems!E:E), 0)",
        "description": "Calculates the total amount for each order by summing the price of all order items associated with the order.",
        "dependencies": [
          "order_id",
          "OrderItems!order_id",
          "OrderItems!price"
        ],
        "apply_to_all_rows": true
      },
      {
        "sheet": "Customers",
        "target_column": "status",
        "start_row": 2,
        "formula": "=IF(TODAY() - created_date > 365, \"Inactive\", \"Active\")",
        "description": "Determines the status of the customer as 'Inactive' if the account was created more than a year ago, otherwise 'Active'.",
        "dependencies": [
          "created_date"
        ],
        "apply_to_all_rows": true
      },
      {
        "sheet": "Products",
        "target_column": "status",
        "start_row": 2,
        "formula": "=IF(stock_quantity > 0, \"Available\", \"Out of Stock\")",
        "description": "Sets the product status to 'Available' if stock quantity is greater than zero, otherwise 'Out of Stock'.",
        "dependencies": [
          "stock_quantity"
        ],
        "apply_to_all_rows": true
      },
      {
        "sheet": "Payments",
        "target_column": "payment_status",
        "start_row": 2,
        "formula": "=IF(amount >= VLOOKUP(order_id, Orders!A:B, 2, FALSE), \"Paid\", \"Pending\")",
        "description": "Sets the payment status to 'Paid' if the payment amount is greater than or equal to the total amount of the order, otherwise 'Pending'.",
        "dependencies": [
          "amount",
          "order_id",
          "Orders!order_id",
          "Orders!total_amount"
        ],
        "apply_to_all_rows": true
      }
    ],
    "validation_rules": [],
    "conditional_formatting": []
  },
  "metadata": {
    "project_info": {
      "prompt": "Create order-to-payment system for grocery e-commerce with inventory tracking",
      "created_at": "2026-01-30T11:23:16.546510",
      "execution_time_seconds": 112.42
    },
    "spreadsheet": {
      "id": "17R7udNxHLZ3gLqe3YPwZVZqKUY2awln-AXC5MsjW_sE",
      "url": "https://docs.google.com/spreadsheets/d/17R7udNxHLZ3gLqe3YPwZVZqKUY2awln-AXC5MsjW_sE",
      "edit_url": "https://docs.google.com/spreadsheets/d/17R7udNxHLZ3gLqe3YPwZVZqKUY2awln-AXC5MsjW_sE/edit"
    },
    "system": {
      "name": "Grocery E-Commerce Order-to-Payment System",
      "description": "A comprehensive system to manage the order-to-payment process for a grocery e-commerce platform, including inventory tracking.",
      "version": "1.0",
      "total_sheets": 5,
      "workflow_stages": [
        "Order Creation",
        "Inventory Check",
        "Payment Processing",
        "Order Fulfillment",
        "Order Completion"
      ],
      "integrations": [
        "Payment Gateway API",
        "Inventory Management System"
      ]
    },
    "structure": {
      "sheets": [
        {
          "name": "Customers",
          "description": "Stores customer information for order processing.",
          "columns": [
            {
              "name": "customer_id",
              "type": "text",
              "required": true,
              "description": "Unique identifier for each customer."
            },
            {
              "name": "customer_name",
              "type": "text",
              "required": true,
              "description": "Full name of the customer."
            },
            {
              "name": "email",
              "type": "email",
              "required": true,
              "description": "Email address of the customer."
            },
            {
              "name": "phone_number",
              "type": "text",
              "required": true,
              "description": "Contact number of the customer."
            },
            {
              "name": "created_date",
              "type": "date",
              "required": true,
              "description": "Date when the customer was added."
            },
            {
              "name": "modified_date",
              "type": "date",
              "required": false,
              "description": "Date when the customer information was last modified."
            },
            {
              "name": "status",
              "type": "dropdown",
              "required": true,
              "description": "Current status of the customer account."
            }
          ],
          "primary_key": "customer_id",
          "relationships": [
            "Orders"
          ]
        },
        {
          "name": "Products",
          "description": "Catalog of products available for purchase.",
          "columns": [
            {
              "name": "product_id",
              "type": "text",
              "required": true,
              "description": "Unique identifier for each product."
            },
            {
              "name": "product_name",
              "type": "text",
              "required": true,
              "description": "Name of the product."
            },
            {
              "name": "category",
              "type": "text",
              "required": true,
              "description": "Category to which the product belongs."
            },
            {
              "name": "price",
              "type": "currency",
              "required": true,
              "description": "Price of the product."
            },
            {
              "name": "stock_quantity",
              "type": "number",
              "required": true,
              "description": "Available stock quantity of the product."
            },
            {
              "name": "created_date",
              "type": "date",
              "required": true,
              "description": "Date when the product was added."
            },
            {
              "name": "modified_date",
              "type": "date",
              "required": false,
              "description": "Date when the product information was last modified."
            },
            {
              "name": "status",
              "type": "dropdown",
              "required": true,
              "description": "Current status of the product."
            }
          ],
          "primary_key": "product_id",
          "relationships": [
            "OrderItems"
          ]
        },
        {
          "name": "Orders",
          "description": "Tracks customer orders from creation to completion.",
          "columns": [
            {
              "name": "order_id",
              "type": "text",
              "required": true,
              "description": "Unique identifier for each order."
            },
            {
              "name": "customer_id",
              "type": "text",
              "required": true,
              "description": "Identifier of the customer who placed the order."
            },
            {
              "name": "order_date",
              "type": "date",
              "required": true,
              "description": "Date when the order was placed."
            },
            {
              "name": "total_amount",
              "type": "currency",
              "required": true,
              "description": "Total amount for the order."
            },
            {
              "name": "order_status",
              "type": "dropdown",
              "required": true,
              "description": "Current status of the order."
            },
            {
              "name": "created_date",
              "type": "date",
              "required": true,
              "description": "Date when the order record was created."
            },
            {
              "name": "modified_date",
              "type": "date",
              "required": false,
              "description": "Date when the order record was last modified."
            }
          ],
          "primary_key": "order_id",
          "relationships": [
            "Customers",
            "OrderItems",
            "Payments"
          ]
        },
        {
          "name": "OrderItems",
          "description": "Details of products included in each order.",
          "columns": [
            {
              "name": "order_item_id",
              "type": "text",
              "required": true,
              "description": "Unique identifier for each order item."
            },
            {
              "name": "order_id",
              "type": "text",
              "required": true,
              "description": "Identifier of the order to which this item belongs."
            },
            {
              "name": "product_id",
              "type": "text",
              "required": true,
              "description": "Identifier of the product included in the order."
            },
            {
              "name": "quantity",
              "type": "number",
              "required": true,
              "description": "Quantity of the product ordered."
            },
            {
              "name": "price",
              "type": "currency",
              "required": true,
              "description": "Price of the product at the time of order."
            },
            {
              "name": "created_date",
              "type": "date",
              "required": true,
              "description": "Date when the order item was added."
            },
            {
              "name": "modified_date",
              "type": "date",
              "required": false,
              "description": "Date when the order item was last modified."
            }
          ],
          "primary_key": "order_item_id",
          "relationships": [
            "Orders",
            "Products"
          ]
        },
        {
          "name": "Payments",
          "description": "Records payment transactions for orders.",
          "columns": [
            {
              "name": "payment_id",
              "type": "text",
              "required": true,
              "description": "Unique identifier for each payment transaction."
            },
            {
              "name": "order_id",
              "type": "text",
              "required": true,
              "description": "Identifier of the order for which the payment was made."
            },
            {
              "name": "payment_date",
              "type": "date",
              "required": true,
              "description": "Date when the payment was processed."
            },
            {
              "name": "amount",
              "type": "currency",
              "required": true,
              "description": "Amount paid in the transaction."
            },
            {
              "name": "payment_status",
              "type": "dropdown",
              "required": true,
              "description": "Status of the payment transaction."
            },
            {
              "name": "created_date",
              "type": "date",
              "required": true,
              "description": "Date when the payment record was created."
            },
            {
              "name": "modified_date",
              "type": "date",
              "required": false,
              "description": "Date when the payment record was last modified."
            }
          ],
          "primary_key": "payment_id",
          "relationships": [
            "Orders"
          ]
        }
      ]
    },
    "statistics": {
      "total_columns": 36,
      "sheets_with_relationships": 5
    }
  }
}