{
  "flow": {
    "system_name": "Order Payment Flow Management System",
    "description": "A comprehensive system to manage the order and payment processes, ensuring efficient tracking from order placement to payment completion.",
    "version": "1.0",
    "sheets": [
      {
        "name": "Customers",
        "columns": [
          {
            "name": "customer_id",
            "type": "text",
            "description": "Unique identifier for each customer.",
            "required": true,
            "validation": "unique",
            "default_value": ""
          },
          {
            "name": "customer_name",
            "type": "text",
            "description": "Full name of the customer.",
            "required": true,
            "validation": "",
            "default_value": ""
          },
          {
            "name": "email",
            "type": "email",
            "description": "Email address of the customer.",
            "required": true,
            "validation": "email format",
            "default_value": ""
          },
          {
            "name": "phone_number",
            "type": "text",
            "description": "Contact phone number of the customer.",
            "required": false,
            "validation": "phone format",
            "default_value": ""
          },
          {
            "name": "created_date",
            "type": "date",
            "description": "Date when the customer record was created.",
            "required": true,
            "validation": "",
            "default_value": "TODAY()"
          },
          {
            "name": "modified_date",
            "type": "date",
            "description": "Date when the customer record was last modified.",
            "required": false,
            "validation": "",
            "default_value": ""
          }
        ],
        "description": "Stores customer information and details.",
        "primary_key": "customer_id",
        "relationships": [
          "Orders"
        ]
      },
      {
        "name": "Products",
        "columns": [
          {
            "name": "product_id",
            "type": "text",
            "description": "Unique identifier for each product.",
            "required": true,
            "validation": "unique",
            "default_value": ""
          },
          {
            "name": "product_name",
            "type": "text",
            "description": "Name of the product.",
            "required": true,
            "validation": "",
            "default_value": ""
          },
          {
            "name": "price",
            "type": "currency",
            "description": "Price of the product.",
            "required": true,
            "validation": "greater than 0",
            "default_value": ""
          },
          {
            "name": "stock_quantity",
            "type": "number",
            "description": "Available stock quantity.",
            "required": true,
            "validation": "integer, greater than or equal to 0",
            "default_value": "0"
          },
          {
            "name": "created_date",
            "type": "date",
            "description": "Date when the product was added to the catalog.",
            "required": true,
            "validation": "",
            "default_value": "TODAY()"
          },
          {
            "name": "modified_date",
            "type": "date",
            "description": "Date when the product details were last modified.",
            "required": false,
            "validation": "",
            "default_value": ""
          }
        ],
        "description": "Catalog of products available for order.",
        "primary_key": "product_id",
        "relationships": [
          "Order_Items"
        ]
      },
      {
        "name": "Orders",
        "columns": [
          {
            "name": "order_id",
            "type": "text",
            "description": "Unique identifier for each order.",
            "required": true,
            "validation": "unique",
            "default_value": ""
          },
          {
            "name": "customer_id",
            "type": "text",
            "description": "Identifier for the customer placing the order.",
            "required": true,
            "validation": "exists in Customers",
            "default_value": ""
          },
          {
            "name": "order_date",
            "type": "date",
            "description": "Date when the order was placed.",
            "required": true,
            "validation": "",
            "default_value": "TODAY()"
          },
          {
            "name": "status",
            "type": "dropdown",
            "description": "Current status of the order.",
            "required": true,
            "validation": "Order Placement, Order Processing, Payment Processing, Order Fulfillment, Order Completion",
            "default_value": "Order Placement"
          },
          {
            "name": "total_amount",
            "type": "currency",
            "description": "Total amount for the order.",
            "required": true,
            "validation": "greater than 0",
            "default_value": ""
          },
          {
            "name": "created_date",
            "type": "date",
            "description": "Date when the order record was created.",
            "required": true,
            "validation": "",
            "default_value": "TODAY()"
          },
          {
            "name": "modified_date",
            "type": "date",
            "description": "Date when the order record was last modified.",
            "required": false,
            "validation": "",
            "default_value": ""
          }
        ],
        "description": "Tracks customer orders and their statuses.",
        "primary_key": "order_id",
        "relationships": [
          "Customers",
          "Order_Items",
          "Payments"
        ]
      },
      {
        "name": "Order_Items",
        "columns": [
          {
            "name": "order_item_id",
            "type": "text",
            "description": "Unique identifier for each order item.",
            "required": true,
            "validation": "unique",
            "default_value": ""
          },
          {
            "name": "order_id",
            "type": "text",
            "description": "Identifier for the order to which this item belongs.",
            "required": true,
            "validation": "exists in Orders",
            "default_value": ""
          },
          {
            "name": "product_id",
            "type": "text",
            "description": "Identifier for the product included in the order.",
            "required": true,
            "validation": "exists in Products",
            "default_value": ""
          },
          {
            "name": "quantity",
            "type": "number",
            "description": "Quantity of the product ordered.",
            "required": true,
            "validation": "integer, greater than 0",
            "default_value": "1"
          },
          {
            "name": "price",
            "type": "currency",
            "description": "Price of the product at the time of order.",
            "required": true,
            "validation": "greater than 0",
            "default_value": ""
          },
          {
            "name": "created_date",
            "type": "date",
            "description": "Date when the order item record was created.",
            "required": true,
            "validation": "",
            "default_value": "TODAY()"
          },
          {
            "name": "modified_date",
            "type": "date",
            "description": "Date when the order item record was last modified.",
            "required": false,
            "validation": "",
            "default_value": ""
          }
        ],
        "description": "Details of products included in each order.",
        "primary_key": "order_item_id",
        "relationships": [
          "Orders",
          "Products"
        ]
      },
      {
        "name": "Payments",
        "columns": [
          {
            "name": "payment_id",
            "type": "text",
            "description": "Unique identifier for each payment transaction.",
            "required": true,
            "validation": "unique",
            "default_value": ""
          },
          {
            "name": "order_id",
            "type": "text",
            "description": "Identifier for the order associated with this payment.",
            "required": true,
            "validation": "exists in Orders",
            "default_value": ""
          },
          {
            "name": "payment_date",
            "type": "date",
            "description": "Date when the payment was made.",
            "required": true,
            "validation": "",
            "default_value": "TODAY()"
          },
          {
            "name": "amount",
            "type": "currency",
            "description": "Amount paid in the transaction.",
            "required": true,
            "validation": "greater than 0",
            "default_value": ""
          },
          {
            "name": "payment_method",
            "type": "dropdown",
            "description": "Method used for the payment.",
            "required": true,
            "validation": "Credit Card, PayPal, Bank Transfer",
            "default_value": "Credit Card"
          },
          {
            "name": "status",
            "type": "dropdown",
            "description": "Current status of the payment.",
            "required": true,
            "validation": "Pending, Completed, Failed",
            "default_value": "Pending"
          },
          {
            "name": "created_date",
            "type": "date",
            "description": "Date when the payment record was created.",
            "required": true,
            "validation": "",
            "default_value": "TODAY()"
          },
          {
            "name": "modified_date",
            "type": "date",
            "description": "Date when the payment record was last modified.",
            "required": false,
            "validation": "",
            "default_value": ""
          }
        ],
        "description": "Records payment transactions for orders.",
        "primary_key": "payment_id",
        "relationships": [
          "Orders"
        ]
      }
    ],
    "workflow_stages": [
      "Order Placement",
      "Order Processing",
      "Payment Processing",
      "Order Fulfillment",
      "Order Completion"
    ],
    "integrations": [
      "Payment Gateway API",
      "Inventory Management System"
    ]
  },
  "formulas": {
    "formulas": [
      {
        "sheet": "Orders",
        "target_column": "total_amount",
        "start_row": 2,
        "formula": "=IFERROR(SUMIF(Order_Items!A:A, A2, Order_Items!E:E), 0)",
        "description": "Calculates the total amount for each order by summing the price of all order items associated with the order.",
        "dependencies": [
          "order_id",
          "Order_Items!order_id",
          "Order_Items!price"
        ],
        "apply_to_all_rows": true
      },
      {
        "sheet": "Products",
        "target_column": "stock_quantity",
        "start_row": 2,
        "formula": "=IFERROR(INDEX(Order_Items!C:C, MATCH(A2, Order_Items!C:C, 0)) - SUMIF(Order_Items!C:C, A2, Order_Items!D:D), B2)",
        "description": "Calculates the remaining stock quantity by subtracting the total ordered quantity from the initial stock quantity.",
        "dependencies": [
          "product_id",
          "Order_Items!product_id",
          "Order_Items!quantity"
        ],
        "apply_to_all_rows": true
      },
      {
        "sheet": "Customers",
        "target_column": "modified_date",
        "start_row": 2,
        "formula": "=IFERROR(MAX(created_date, modified_date), created_date)",
        "description": "Updates the modified date to the latest of created or modified date for tracking changes.",
        "dependencies": [
          "created_date",
          "modified_date"
        ],
        "apply_to_all_rows": true
      },
      {
        "sheet": "Payments",
        "target_column": "status",
        "start_row": 2,
        "formula": "=IFERROR(IF(amount >= VLOOKUP(order_id, Orders!A:E, 5, FALSE), \"Paid\", \"Pending\"), \"Pending\")",
        "description": "Determines the payment status as 'Paid' if the payment amount is greater than or equal to the order total amount, otherwise 'Pending'.",
        "dependencies": [
          "amount",
          "order_id",
          "Orders!order_id",
          "Orders!total_amount"
        ],
        "apply_to_all_rows": true
      },
      {
        "sheet": "Orders",
        "target_column": "status",
        "start_row": 2,
        "formula": "=IFERROR(IF(TODAY() - order_date > 30, \"Overdue\", \"On Time\"), \"On Time\")",
        "description": "Sets the order status to 'Overdue' if the order date is more than 30 days ago, otherwise 'On Time'.",
        "dependencies": [
          "order_date"
        ],
        "apply_to_all_rows": true
      }
    ],
    "validation_rules": [],
    "conditional_formatting": []
  },
  "metadata": {
    "project_info": {
      "prompt": "Make a order - payement Flow Management System",
      "created_at": "2026-01-29T22:12:23.527209",
      "execution_time_seconds": 128.87
    },
    "spreadsheet": {
      "id": "1zCxp8YWTLsHljg9961LJWKzKKcx-koBCbEqW7OQK_OU",
      "url": "https://docs.google.com/spreadsheets/d/1zCxp8YWTLsHljg9961LJWKzKKcx-koBCbEqW7OQK_OU",
      "edit_url": "https://docs.google.com/spreadsheets/d/1zCxp8YWTLsHljg9961LJWKzKKcx-koBCbEqW7OQK_OU/edit"
    },
    "system": {
      "name": "Order Payment Flow Management System",
      "description": "A comprehensive system to manage the order and payment processes, ensuring efficient tracking from order placement to payment completion.",
      "version": "1.0",
      "total_sheets": 5,
      "workflow_stages": [
        "Order Placement",
        "Order Processing",
        "Payment Processing",
        "Order Fulfillment",
        "Order Completion"
      ],
      "integrations": [
        "Payment Gateway API",
        "Inventory Management System"
      ]
    },
    "structure": {
      "sheets": [
        {
          "name": "Customers",
          "description": "Stores customer information and details.",
          "columns": [
            {
              "name": "customer_id",
              "type": "text",
              "required": true,
              "description": "Unique identifier for each customer."
            },
            {
              "name": "customer_name",
              "type": "text",
              "required": true,
              "description": "Full name of the customer."
            },
            {
              "name": "email",
              "type": "email",
              "required": true,
              "description": "Email address of the customer."
            },
            {
              "name": "phone_number",
              "type": "text",
              "required": false,
              "description": "Contact phone number of the customer."
            },
            {
              "name": "created_date",
              "type": "date",
              "required": true,
              "description": "Date when the customer record was created."
            },
            {
              "name": "modified_date",
              "type": "date",
              "required": false,
              "description": "Date when the customer record was last modified."
            }
          ],
          "primary_key": "customer_id",
          "relationships": [
            "Orders"
          ]
        },
        {
          "name": "Products",
          "description": "Catalog of products available for order.",
          "columns": [
            {
              "name": "product_id",
              "type": "text",
              "required": true,
              "description": "Unique identifier for each product."
            },
            {
              "name": "product_name",
              "type": "text",
              "required": true,
              "description": "Name of the product."
            },
            {
              "name": "price",
              "type": "currency",
              "required": true,
              "description": "Price of the product."
            },
            {
              "name": "stock_quantity",
              "type": "number",
              "required": true,
              "description": "Available stock quantity."
            },
            {
              "name": "created_date",
              "type": "date",
              "required": true,
              "description": "Date when the product was added to the catalog."
            },
            {
              "name": "modified_date",
              "type": "date",
              "required": false,
              "description": "Date when the product details were last modified."
            }
          ],
          "primary_key": "product_id",
          "relationships": [
            "Order_Items"
          ]
        },
        {
          "name": "Orders",
          "description": "Tracks customer orders and their statuses.",
          "columns": [
            {
              "name": "order_id",
              "type": "text",
              "required": true,
              "description": "Unique identifier for each order."
            },
            {
              "name": "customer_id",
              "type": "text",
              "required": true,
              "description": "Identifier for the customer placing the order."
            },
            {
              "name": "order_date",
              "type": "date",
              "required": true,
              "description": "Date when the order was placed."
            },
            {
              "name": "status",
              "type": "dropdown",
              "required": true,
              "description": "Current status of the order."
            },
            {
              "name": "total_amount",
              "type": "currency",
              "required": true,
              "description": "Total amount for the order."
            },
            {
              "name": "created_date",
              "type": "date",
              "required": true,
              "description": "Date when the order record was created."
            },
            {
              "name": "modified_date",
              "type": "date",
              "required": false,
              "description": "Date when the order record was last modified."
            }
          ],
          "primary_key": "order_id",
          "relationships": [
            "Customers",
            "Order_Items",
            "Payments"
          ]
        },
        {
          "name": "Order_Items",
          "description": "Details of products included in each order.",
          "columns": [
            {
              "name": "order_item_id",
              "type": "text",
              "required": true,
              "description": "Unique identifier for each order item."
            },
            {
              "name": "order_id",
              "type": "text",
              "required": true,
              "description": "Identifier for the order to which this item belongs."
            },
            {
              "name": "product_id",
              "type": "text",
              "required": true,
              "description": "Identifier for the product included in the order."
            },
            {
              "name": "quantity",
              "type": "number",
              "required": true,
              "description": "Quantity of the product ordered."
            },
            {
              "name": "price",
              "type": "currency",
              "required": true,
              "description": "Price of the product at the time of order."
            },
            {
              "name": "created_date",
              "type": "date",
              "required": true,
              "description": "Date when the order item record was created."
            },
            {
              "name": "modified_date",
              "type": "date",
              "required": false,
              "description": "Date when the order item record was last modified."
            }
          ],
          "primary_key": "order_item_id",
          "relationships": [
            "Orders",
            "Products"
          ]
        },
        {
          "name": "Payments",
          "description": "Records payment transactions for orders.",
          "columns": [
            {
              "name": "payment_id",
              "type": "text",
              "required": true,
              "description": "Unique identifier for each payment transaction."
            },
            {
              "name": "order_id",
              "type": "text",
              "required": true,
              "description": "Identifier for the order associated with this payment."
            },
            {
              "name": "payment_date",
              "type": "date",
              "required": true,
              "description": "Date when the payment was made."
            },
            {
              "name": "amount",
              "type": "currency",
              "required": true,
              "description": "Amount paid in the transaction."
            },
            {
              "name": "payment_method",
              "type": "dropdown",
              "required": true,
              "description": "Method used for the payment."
            },
            {
              "name": "status",
              "type": "dropdown",
              "required": true,
              "description": "Current status of the payment."
            },
            {
              "name": "created_date",
              "type": "date",
              "required": true,
              "description": "Date when the payment record was created."
            },
            {
              "name": "modified_date",
              "type": "date",
              "required": false,
              "description": "Date when the payment record was last modified."
            }
          ],
          "primary_key": "payment_id",
          "relationships": [
            "Orders"
          ]
        }
      ]
    },
    "statistics": {
      "total_columns": 34,
      "sheets_with_relationships": 5
    }
  }
}